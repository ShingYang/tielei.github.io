---
layout: post
category: "android"
title: "Android应用的端外推送到底有多烦？"
date: 2016-08-04 01:00:00 +0800
published: true
---

说Android的端外推送比较烦，实际有两层意思：首先是说实现上比较麻烦，至今业界也没有找到一种完美的解决方案，Android程序员通常需要同时集成多家推送平台（如果有自己的端内推送，还要考虑与端内推送的配合）；其次是说Android推送的市场现状比较混乱，无论选择哪一家，都让人纠结万分，难免心情烦躁。无论是你花费了多少功夫，做了多少优化，仍然有推送不到的情况发生。

网上已经有很多关于Android推送的讨论，但很少有站在App开发者（特别是开发App的创业团队）的角度来进行介绍的文章。本文的目的，就是站在一个App开发团队的角度，集中讨论两方面的问题：

* 如何对各家的推送平台进行技术选型；
* 在集成各家推送平台的SDK的时候，应该重点关注哪些问题。

<!--more-->

#### 为什么本文只讨论端外推送？

通常大厂的App都会区分端内推送和端外推送（端指的是客户端），具体说来：

* 当App在前台运行的时候，这时的推送称为端内推送。端内推送一般是走App自己实现的一套推送系统：推送服务器是自己的，客户端维护一条长连接连到自己的推送服务器，不依赖任何第三方的推送系统。
* 当App从前台退到后台，在短时间内App未被杀死前，App自己的长连接仍然有效。这时的推送可以仍然走App自己的推送系统。所谓的“Android进程保活”，就是为了尽量延长这段在后台存活的时间。
* 当App在后台运行足够长的时间后，App进程由于被清理或者其它原因，App自己的长连接断开。这时的推送就称为端外推送了，只能走某个第三方推送平台了。

从这个过程来看，大厂的App的推送策略可以概括为：优先使用自己的推送，实在不行再走第三方推送平台。为什么这样呢？因为自己的推送系统更快、更有保障：

* 更快，是因为你交给第三方推送平台的推送消息要跟很多其它家App的消息一起排队。
* 更有保障。维护。。。


#### 有哪些推送平台可以选择？

#### 纠结点在哪？

#### 推送和长连接是什么关系？

#### 推送的到达率到底跟什么有关？


#### 拥抱变化

